{"ast":null,"code":"var _jsxFileName = \"/home/florian/VSCodeProjects/PL-Launchpad-Dropbox-To-IPFS-Dropbox-App/frontend/src/views/dropbox-auth/DropboxAuth.js\";\nimport React, { Component } from 'react';\nimport { StyleSheet, Text, View, Linking, Button, Platform } from 'react-native';\nimport uuidV4 from 'uuid/v4';\nimport shittyQs from 'shitty-qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DROPBOX_APP_KEY = 'c3hbpngaqu240bf';\nexport default class DropboxOAuthSample extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDropboxInit: false,\n      apiToken: '',\n      verification: uuidV4()\n    };\n  }\n\n  componentDidMount() {\n    Linking.addEventListener('url', event => this.handleLinkingUrl(event));\n  }\n\n  componentWillUnmount() {\n    Linking.removeEventListener('url', event => this.handleLinkingUrl(event));\n  }\n\n  handleLinkingUrl(event) {\n    var [, query_string] = event.url.match(/(.*)/);\n    var query = shittyQs(query_string);\n\n    if (this.state.verification === query.state) {\n      this.setState({\n        isDropboxInit: true,\n        apiToken: query.access_token\n      });\n    } else {\n      alert(\"Verification non égale\");\n    }\n  }\n\n  loginWithDropbox() {\n    const redirect_uri = Platform.OS === 'ios' ? 'dropboxoauthsample://open' : 'https://www.dropboxoauthsample.com/open';\n    const url = `https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=${DROPBOX_APP_KEY}&redirect_uri=${redirect_uri}&state=${this.state.verification}`;\n    Linking.openURL(url).catch(err => console.error('An error occurred', err));\n  }\n\n  render() {\n    const instruction = this.state.isDropboxInit ? 'Dropbox API token : ' + this.state.apiToken : 'Vous ne vous êtes pas encore connecté';\n    return /*#__PURE__*/_jsxDEV(View, {\n      style: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        title: \"Se connecter avec Dropbox\",\n        onPress: () => this.loginWithDropbox()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        style: styles.instructions,\n        children: instruction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF'\n  },\n  instructions: {\n    marginTop: 32,\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5\n  }\n});","map":{"version":3,"sources":["/home/florian/VSCodeProjects/PL-Launchpad-Dropbox-To-IPFS-Dropbox-App/frontend/src/views/dropbox-auth/DropboxAuth.js"],"names":["React","Component","StyleSheet","Text","View","Linking","Button","Platform","uuidV4","shittyQs","DROPBOX_APP_KEY","DropboxOAuthSample","constructor","props","state","isDropboxInit","apiToken","verification","componentDidMount","addEventListener","event","handleLinkingUrl","componentWillUnmount","removeEventListener","query_string","url","match","query","setState","access_token","alert","loginWithDropbox","redirect_uri","OS","openURL","catch","err","console","error","render","instruction","styles","container","instructions","create","flex","justifyContent","alignItems","backgroundColor","marginTop","textAlign","color","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { StyleSheet, Text, View, Linking, Button, Platform } from 'react-native';\nimport uuidV4 from 'uuid/v4';\nimport shittyQs from 'shitty-qs';\n\nconst DROPBOX_APP_KEY = 'c3hbpngaqu240bf';\nexport default class DropboxOAuthSample extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDropboxInit: false,\n      apiToken: '',\n      verification: uuidV4(),\n    }\n  }\n\n  componentDidMount() {\n    Linking.addEventListener('url', (event) => this.handleLinkingUrl(event));\n  }\n\n  componentWillUnmount() {\n    Linking.removeEventListener('url', (event) => this.handleLinkingUrl(event));\n  }\n\n  handleLinkingUrl(event) {\n    var [, query_string] = event.url.match(/(.*)/);\n    var query = shittyQs(query_string);\n    if (this.state.verification === query.state) {\n      this.setState({isDropboxInit:true,apiToken:query.access_token})\n    } else {\n      alert(\"Verification non égale\");\n    }\n  }\n\n  loginWithDropbox() {\n    const redirect_uri = Platform.OS === 'ios' ? 'dropboxoauthsample://open' : 'https://www.dropboxoauthsample.com/open';\n    const url = `https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=${DROPBOX_APP_KEY}&redirect_uri=${redirect_uri}&state=${this.state.verification}`;\n    Linking.openURL(url).catch(err => console.error('An error occurred', err));\n  }\n\n  render() {\n    const instruction = this.state.isDropboxInit ? 'Dropbox API token : ' + this.state.apiToken : 'Vous ne vous êtes pas encore connecté';\n    return (\n      <View style={styles.container}>\n        <Button title='Se connecter avec Dropbox' onPress={() => this.loginWithDropbox()} />\n        <Text style={styles.instructions}>\n          {instruction}\n        </Text>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  instructions: {\n    marginTop: 32,\n    textAlign: 'center',\n    color: '#333333',\n    marginBottom: 5,\n  },\n});"]},"metadata":{},"sourceType":"module"}